<local:WindowBase
    x:Class="ClassifyFiles.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"             
        xmlns:local="clr-namespace:ClassifyFiles.UI"
    Loaded="Window_Loaded"
    mc:Ignorable="d"
    Closing="Window_Closing"
    xmlns:m="http://schemas.modernwpf.com/2019"
    WindowStartupLocation="CenterScreen"
        Title="文件分类浏览器" Height="600" Width="1200" x:Name="win">
    <local:WindowBase.Resources>
        <local:IsNotNull2BoolConverter x:Key="nn2b"/>
    </local:WindowBase.Resources> 
    <Grid x:Name="outGrd" >
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="4"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TabControl x:Name="tab" ItemsSource="{Binding Projects}"
                    SelectedItem="{Binding SelectedProject}" Margin="0,0,0,-21.5"
                    MinHeight="64">
            <m:TabControlHelper.TabStripHeader>
                <m:AppBarButton Grid.Column="0" LabelPosition="Collapsed" IsCompact="True" Icon="Add"  Click="AddProjectButton_Click"/>
            </m:TabControlHelper.TabStripHeader>
            <m:TabControlHelper.TabStripFooter>
                <m:SimpleStackPanel HorizontalAlignment="Right" Orientation="Horizontal" Spacing="8">
                    <m:CommandBar DefaultLabelPosition="Right" x:Name="cmdBarPanel" Background="Transparent">
                        <m:AppBarToggleButton IsEnabled="{Binding SelectedProject, Converter={StaticResource nn2b}}"
                                              x:Name="btnModeView"  Background="Transparent"  Grid.Column="0"  Icon="View"  Label="浏览" 
                                              Checked="RadioButton_Checked" IsChecked="True"/>
                        <m:AppBarToggleButton IsEnabled="{Binding SelectedProject, Converter={StaticResource nn2b}}"
                                              x:Name="btnModeClasses" Background="Transparent" Grid.Column="0" Icon="List"  Label="分类"
                                              Checked="RadioButton_Checked"/>
                        <m:AppBarToggleButton IsEnabled="{Binding SelectedProject, Converter={StaticResource nn2b}}"
                                              x:Name="btnModeProjectSettings"  Background="Transparent" Grid.Column="0"  Label="项目设置"
                                              Checked="RadioButton_Checked">
                            <m:AppBarToggleButton.Icon>
                                <m:FontIcon Glyph="&#xF259;"/>
                            </m:AppBarToggleButton.Icon>
                        </m:AppBarToggleButton>
                        <m:AppBarButton Icon="Setting" Label="设置" LabelPosition="Collapsed" Click="SettingMenuItem_Click" />
                    </m:CommandBar>
                </m:SimpleStackPanel>
            </m:TabControlHelper.TabStripFooter>
            <TabControl.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Name}"/>
                </DataTemplate>
            </TabControl.ItemTemplate>
            <TabControl.ContentTemplate>
                <DataTemplate>
                    <TextBlock/>
                </DataTemplate>
            </TabControl.ContentTemplate>
        </TabControl>
   
        <ContentControl Content="{Binding MainPanel}" Grid.Row="2" IsEnabled="{Binding SelectedProject, Converter={StaticResource nn2b}}"/>

        <local:ProgressDialog x:Name="Progress" Grid.RowSpan="999" Grid.ColumnSpan="999"/>
    </Grid>
</local:WindowBase>
